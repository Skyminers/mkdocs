<!DOCTYPE html><html lang="zh" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="an example blog set up following the tutorial">
      
      
      
        <link rel="canonical" href="https://docs.skyminer.top/tech/triton_process/">
      
      
        <link rel="prev" href="../decision_tree/">
      
      
        <link rel="next" href="../../methods/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Triton 编译流程 - Sky_miner</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Noto Sans SC";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-6NJEW490XP"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-6NJEW490XP",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-6NJEW490XP",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#triton" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Sky_miner" class="md-header__button md-logo" aria-label="Sky_miner" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M256 141.3v309.3l.5-.2A449 449 0 0 1 428.8 416H448V96h-19.2c-42.2 0-84.1 8.4-123.1 24.6-16.8 7-33.4 13.9-49.7 20.7m-25.1-79.8L256 72l25.1-10.5C327.9 42 378.1 32 428.8 32H464c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48h-35.2c-50.7 0-100.9 10-147.7 29.5l-12.8 5.3c-7.9 3.3-16.7 3.3-24.6 0l-12.8-5.3C184.1 490 133.9 480 83.2 480H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h35.2c50.7 0 100.9 10 147.7 29.5"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sky_miner
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Triton 编译流程
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="深色模式" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="深色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="浅色模式" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="浅色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Skyminers/mkdocs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    Skyminers/mkdocs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../interview/" class="md-tabs__link">
          
  
  
    
  
  面试相关

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  技术

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../methods/" class="md-tabs__link">
          
  
  
    
  
  方法记录

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../others/" class="md-tabs__link">
          
  
  
    
  
  杂项

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Sky_miner" class="md-nav__button md-logo" aria-label="Sky_miner" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M256 141.3v309.3l.5-.2A449 449 0 0 1 428.8 416H448V96h-19.2c-42.2 0-84.1 8.4-123.1 24.6-16.8 7-33.4 13.9-49.7 20.7m-25.1-79.8L256 72l25.1-10.5C327.9 42 378.1 32 428.8 32H464c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48h-35.2c-50.7 0-100.9 10-147.7 29.5l-12.8 5.3c-7.9 3.3-16.7 3.3-24.6 0l-12.8-5.3C184.1 490 133.9 480 83.2 480H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h35.2c50.7 0 100.9 10 147.7 29.5"></path></svg>

    </a>
    Sky_miner
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Skyminers/mkdocs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    Skyminers/mkdocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../interview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    面试相关
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    面试相关
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interview/auc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AUC 面试资料整理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interview/resnet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ResNet 面试资料整理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interview/transformer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transformer 面试资料整理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interview/leetcode100/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leetcode 100 热题题解与代码
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interview/cheating_sheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    八股文/智力题整理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    技术
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    技术
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decision_tree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    实现决策树
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Triton 编译流程
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Triton 编译流程
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-python" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Python 代码
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-triton-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Triton DSL 代码
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-ttir-triton-ir" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: TTIR (Triton IR)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-ttgir-triton-global-ir" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: TTGIR (Triton Global IR)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-llir-llvm-ir" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: LLIR (LLVM IR)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-ptx-parallel-thread-execution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6: PTX (Parallel Thread eXecution)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-cubin-cuda-binary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7: CUBIN (Cuda Binary)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        参考链接
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../methods/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    方法记录
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    方法记录
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../methods/format_disk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MacOS 系统下如何格式化磁盘
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../methods/vscode_setting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VSCode 配置记录
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../methods/linux_command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux 操作记录
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../others/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    杂项
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    杂项
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../others/ads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADS 课程评分细则与评分程序
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-python" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Python 代码
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-triton-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Triton DSL 代码
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-ttir-triton-ir" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: TTIR (Triton IR)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-ttgir-triton-global-ir" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: TTGIR (Triton Global IR)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-llir-llvm-ir" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: LLIR (LLVM IR)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-ptx-parallel-thread-execution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6: PTX (Parallel Thread eXecution)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-cubin-cuda-binary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7: CUBIN (Cuda Binary)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        参考链接
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Skyminers/mkdocs/edit/master/docs/tech/triton_process.md" title="编辑此页" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  


<h1 id="triton">Triton 编译流程<a class="headerlink" href="#triton" title="Permanent link">¶</a></h1>
<blockquote>
<p>本文梳理了从 triton DSL 到执行的逐过程</p>
</blockquote>
<h2 id="step-1-python">Step 1: Python 代码<a class="headerlink" href="#step-1-python" title="Permanent link">¶</a></h2>
<p>我们直接以 triton 教程中的一段向量相加为例。</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">triton</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">triton.language</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tl</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nd">@triton</span><span class="o">.</span><span class="n">jit</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_kernel</span><span class="p">(</span><span class="n">x_ptr</span><span class="p">,</span>  <span class="c1"># 指向第一个输入向量的指针。</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>               <span class="n">y_ptr</span><span class="p">,</span>  <span class="c1"># 指向第二个输入向量的指针。</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>               <span class="n">output_ptr</span><span class="p">,</span>  <span class="c1"># 指向输出向量的指针。</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>               <span class="n">n_elements</span><span class="p">,</span>  <span class="c1"># 向量的大小。</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>               <span class="n">BLOCK_SIZE</span><span class="p">:</span> <span class="n">tl</span><span class="o">.</span><span class="n">constexpr</span><span class="p">,</span>  <span class="c1"># 每个程序应处理的元素数量。</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>               <span class="c1"># NOTE：`constexpr` 因此它可以用作形状值。</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>               <span class="p">):</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="c1"># 有多个“程序”处理不同的数据。需要确定是哪一个程序：</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">pid</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">program_id</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 使用 1D 启动网格，因此轴为 0。</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="c1"># 该程序将处理相对初始数据偏移的输入。</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="c1"># 例如，如果有一个长度为 256, 块大小为 64 的向量，程序将各自访问 [0:64, 64:128, 128:192, 192:256] 的元素。</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="c1"># 注意 offsets 是指针列表：</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="n">block_start</span> <span class="o">=</span> <span class="n">pid</span> <span class="o">*</span> <span class="n">BLOCK_SIZE</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="n">offsets</span> <span class="o">=</span> <span class="n">block_start</span> <span class="o">+</span> <span class="n">tl</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">BLOCK_SIZE</span><span class="p">)</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="c1"># 创建掩码以防止内存操作超出边界访问。</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="n">mask</span> <span class="o">=</span> <span class="n">offsets</span> <span class="o">&lt;</span> <span class="n">n_elements</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="c1"># 从 DRAM 加载 x 和 y，如果输入不是块大小的整数倍，则屏蔽掉任何多余的元素。</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    <span class="n">x</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">x_ptr</span> <span class="o">+</span> <span class="n">offsets</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    <span class="n">y</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">y_ptr</span> <span class="o">+</span> <span class="n">offsets</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    <span class="c1"># 将 x + y 写回 DRAM。</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>    <span class="n">tl</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">output_ptr</span> <span class="o">+</span> <span class="n">offsets</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">):</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>    <span class="c1"># 需要预分配输出</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>    <span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">is_cuda</span> <span class="ow">and</span> <span class="n">y</span><span class="o">.</span><span class="n">is_cuda</span> <span class="ow">and</span> <span class="n">output</span><span class="o">.</span><span class="n">is_cuda</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>    <span class="n">n_elements</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">numel</span><span class="p">()</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>    <span class="c1"># 这里的 SPMD 启动 grid 表示并行运行的内核实例的数量</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>    <span class="c1"># 类似 CUDA 启动 grid。可以是 Tuple[int]，也可以是 Callable(meta) -&gt; Tuple[int]</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>    <span class="c1"># 在这种情况下，使用 1D 网格，其中大小是块的数量</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>    <span class="n">grid</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">meta</span><span class="p">:</span> <span class="p">(</span><span class="n">triton</span><span class="o">.</span><span class="n">cdiv</span><span class="p">(</span><span class="n">n_elements</span><span class="p">,</span> <span class="n">meta</span><span class="p">[</span><span class="s2">"BLOCK_SIZE"</span><span class="p">]),</span> <span class="p">)</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>    <span class="c1"># NOTE:</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>    <span class="c1">#  - 每个 torch.tensor 对象都会隐式转换为其第一个元素的指针</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>    <span class="c1">#  - triton.jit 函数可以通过启动网格索引来获得可调用的 GPU 内核</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>    <span class="c1">#  - 不要忘记以关键字参数传递元参数</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>    <span class="n">add_kernel</span><span class="p">[</span><span class="n">grid</span><span class="p">](</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">n_elements</span><span class="p">,</span> <span class="n">BLOCK_SIZE</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>    <span class="c1"># 返回 z 的句柄，但由于 torch.cuda.synchronize() 尚未被调用，此时内核仍在异步运行</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>    <span class="k">return</span> <span class="n">output</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="c1"># 调用测试</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="n">torch</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="n">size</span> <span class="o">=</span> <span class="mi">98432</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="n">x</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s2">"cuda"</span><span class="p">)</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="n">y</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s2">"cuda"</span><span class="p">)</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="n">output</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span></code></pre></div>
<p>其中的 <code>add_kernel</code> 是我们这次的主角。直接运行这段代码，triton 会在 <code>~/.triton/cache</code> 中保存此次的所有中间产物。</p>
<h2 id="step-2-triton-dsl">Step 2: Triton DSL 代码<a class="headerlink" href="#step-2-triton-dsl" title="Permanent link">¶</a></h2>
<p>此处的代码实际上是 Triton JIT 编译流程的输入，即 Python DSL。是编译流程的起点。</p>
<p>该代码中包含了最高级别的抽象：</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">module</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="n">tt</span><span class="p">.</span><span class="n">func</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="err">@</span><span class="n">add_kernel</span><span class="p">(</span><span class="o">%</span><span class="n">x_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"x_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">y_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"y_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">output_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"output_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">n_elements</span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"n_elements"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)))</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="p">{</span><span class="n">noinline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="o">%</span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">get_program_id</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc18</span><span class="p">)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">extsi</span><span class="w"> </span><span class="o">%</span><span class="n">pid</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">extsi</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">muli</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">2147483647</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">-2147483648</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">cmpi</span><span class="w"> </span><span class="n">sle</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_3</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_4</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">cmpi</span><span class="w"> </span><span class="n">sge</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_3</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_5</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">andi</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_6</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_7</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start_9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">muli</span><span class="w"> </span><span class="o">%</span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">make_range</span><span class="w"> </span><span class="p">{</span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc20</span><span class="p">)</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">block_start_9</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">extsi</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_10</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">extsi</span><span class="w"> </span><span class="o">%</span><span class="n">offsets</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">addi</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_11</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_12</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">2147483647</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">-2147483648</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="n">dense</span><span class="o">&lt;</span><span class="mi">2147483647</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">cmpi</span><span class="w"> </span><span class="n">sle</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_13</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="n">dense</span><span class="o">&lt;</span><span class="mi">-2147483648</span><span class="o">&gt;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_19</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">cmpi</span><span class="w"> </span><span class="n">sge</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_13</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_18</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_20</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">andi</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_17</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_19</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi1</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">addi</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_10</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">    </span><span class="o">%</span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">n_elements</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc22</span><span class="p">)</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">    </span><span class="o">%</span><span class="n">mask_22</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">cmpi</span><span class="w"> </span><span class="n">slt</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_21</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc22</span><span class="p">)</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">    </span><span class="o">%</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">x_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc23</span><span class="p">)</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">    </span><span class="o">%</span><span class="n">x_23</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_21</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc23</span><span class="p">)</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">    </span><span class="o">%</span><span class="n">x_24</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">load</span><span class="w"> </span><span class="o">%</span><span class="n">x_23</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_22</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc24</span><span class="p">)</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">    </span><span class="o">%</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">y_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc25</span><span class="p">)</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">    </span><span class="o">%</span><span class="n">y_25</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_21</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc25</span><span class="p">)</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">    </span><span class="o">%</span><span class="n">y_26</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">load</span><span class="w"> </span><span class="o">%</span><span class="n">y_25</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_22</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc26</span><span class="p">)</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="w">    </span><span class="o">%</span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">addf</span><span class="w"> </span><span class="o">%</span><span class="n">x_24</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">y_26</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xf32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc27</span><span class="p">)</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">    </span><span class="o">%</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">output_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc11</span><span class="p">)</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="w">    </span><span class="o">%</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_21</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc11</span><span class="p">)</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="w">    </span><span class="n">tt</span><span class="p">.</span><span class="n">store</span><span class="w"> </span><span class="o">%</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_22</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc12</span><span class="p">)</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">    </span><span class="n">tt</span><span class="p">.</span><span class="k">return</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc13</span><span class="p">)</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="step-3-ttir-triton-ir">Step 3: TTIR (Triton IR)<a class="headerlink" href="#step-3-ttir-triton-ir" title="Permanent link">¶</a></h2>
<p>Triton JIT 的第一步是将 Python DSL 转换成 Triton 自己的 IR。</p>
<p>在这一步中，所完成的事项有三类：
1. 解析：将 Python 文本代码转换为一个 AST(抽象语法树)，层次化表示了原始代码中的计算逻辑。
2. 函数、类型、语义检查：识别 Triton 内置函数，进行类型推断和语法检查等。
3. 转换：按照 Triton 内部设定转换为自身可识别的 IR 格式。通常涉及到一些 Triton 操作的特定内容生成，例如并行模型转换、内存访问抽象化等。</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">module</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="n">tt</span><span class="p">.</span><span class="n">func</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="err">@</span><span class="n">add_kernel</span><span class="p">(</span><span class="o">%</span><span class="n">x_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"x_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">y_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"y_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">output_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"output_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">n_elements</span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"n_elements"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)))</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="p">{</span><span class="n">noinline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="o">%</span><span class="n">c1024_i32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc1</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="o">%</span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">get_program_id</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">muli</span><span class="w"> </span><span class="o">%</span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">c1024_i32</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc20</span><span class="p">)</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">make_range</span><span class="w"> </span><span class="p">{</span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">block_start</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc22</span><span class="p">)</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">addi</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_0</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc22</span><span class="p">)</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="o">%</span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">n_elements</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc23</span><span class="p">)</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">cmpi</span><span class="w"> </span><span class="n">slt</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc23</span><span class="p">)</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="o">%</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">x_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc24</span><span class="p">)</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="o">%</span><span class="n">x_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc24</span><span class="p">)</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="o">%</span><span class="n">x_4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">load</span><span class="w"> </span><span class="o">%</span><span class="n">x_3</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc25</span><span class="p">)</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="o">%</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">y_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc26</span><span class="p">)</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="o">%</span><span class="n">y_5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc26</span><span class="p">)</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="o">%</span><span class="n">y_6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">load</span><span class="w"> </span><span class="o">%</span><span class="n">y_5</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc27</span><span class="p">)</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">    </span><span class="o">%</span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">addf</span><span class="w"> </span><span class="o">%</span><span class="n">x_4</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">y_6</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xf32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc28</span><span class="p">)</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="o">%</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">output_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc12</span><span class="p">)</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">    </span><span class="o">%</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc12</span><span class="p">)</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="n">tt</span><span class="p">.</span><span class="n">store</span><span class="w"> </span><span class="o">%</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc13</span><span class="p">)</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">    </span><span class="n">tt</span><span class="p">.</span><span class="k">return</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc14</span><span class="p">)</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="step-4-ttgir-triton-global-ir">Step 4: TTGIR (Triton Global IR)<a class="headerlink" href="#step-4-ttgir-triton-global-ir" title="Permanent link">¶</a></h2>
<p>在转换到该 IR 的过程中，Triton 主要将 Kernel 中独立、分散的计算逻辑提升为可以被整个程序全局分析和优化的结构，并且包含了更多内存相关信息。</p>
<p>其主要作用为：
1. 规范化格式和局部优化：采用 SSA 转换，确保每个变量只被复制一次；消除死边。
2. <strong>识别内存访存方式</strong>：识别全局内存区域中被频繁使用的内存区域进行重点标记；识别和简化指针计算，合并内存索引相关计算，简化表达式。
3. 优化控制流表示：识别循环中的不变量提取到外部；识别循环的计数器、增量、退出方式。</p>
<p>总的来说，该转换旨在更加清晰地描述数据流。</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cp">#blocked = #ttg.blocked&lt;{sizePerThread = [4], threadsPerWarp = [32], warpsPerCTA = [4], order = [0]}&gt;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">module</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="p">{</span><span class="s">"ttg.num-ctas"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="s">"ttg.num-warps"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">ttg</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"cuda:86"</span><span class="p">,</span><span class="w"> </span><span class="s">"ttg.threads-per-warp"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="n">tt</span><span class="p">.</span><span class="n">func</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="err">@</span><span class="n">add_kernel</span><span class="p">(</span><span class="o">%</span><span class="n">x_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"x_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">y_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"y_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">output_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"output_ptr"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)),</span><span class="w"> </span><span class="o">%</span><span class="n">n_elements</span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">{</span><span class="n">tt</span><span class="p">.</span><span class="n">divisibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="s">"n_elements"</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)))</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="p">{</span><span class="n">noinline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="o">%</span><span class="n">c1024_i32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">constant</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc1</span><span class="p">)</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="o">%</span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">get_program_id</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc19</span><span class="p">)</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="o">%</span><span class="n">block_start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">muli</span><span class="w"> </span><span class="o">%</span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">c1024_i32</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc20</span><span class="p">)</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">make_range</span><span class="w"> </span><span class="p">{</span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="p">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc21</span><span class="p">)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">block_start</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc22</span><span class="p">)</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">addi</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_0</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc22</span><span class="p">)</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="o">%</span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">n_elements</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc23</span><span class="p">)</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">cmpi</span><span class="w"> </span><span class="n">slt</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc23</span><span class="p">)</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="o">%</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">x_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc24</span><span class="p">)</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="o">%</span><span class="n">x_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc24</span><span class="p">)</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="o">%</span><span class="n">x_4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">load</span><span class="w"> </span><span class="o">%</span><span class="n">x_3</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc25</span><span class="p">)</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="o">%</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">y_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc26</span><span class="p">)</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">    </span><span class="o">%</span><span class="n">y_5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc26</span><span class="p">)</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">    </span><span class="o">%</span><span class="n">y_6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">load</span><span class="w"> </span><span class="o">%</span><span class="n">y_5</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc27</span><span class="p">)</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">    </span><span class="o">%</span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arith</span><span class="p">.</span><span class="n">addf</span><span class="w"> </span><span class="o">%</span><span class="n">x_4</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">y_6</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xf32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc28</span><span class="p">)</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">    </span><span class="o">%</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">splat</span><span class="w"> </span><span class="o">%</span><span class="n">output_ptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc12</span><span class="p">)</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">    </span><span class="o">%</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tt</span><span class="p">.</span><span class="n">addptr</span><span class="w"> </span><span class="o">%</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">offsets_1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">xi32</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc12</span><span class="p">)</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">    </span><span class="n">tt</span><span class="p">.</span><span class="n">store</span><span class="w"> </span><span class="o">%</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">mask_2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">tensor</span><span class="o">&lt;</span><span class="mi">1024</span><span class="n">x</span><span class="o">!</span><span class="n">tt</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">blocked</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc13</span><span class="p">)</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">    </span><span class="n">tt</span><span class="p">.</span><span class="k">return</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc14</span><span class="p">)</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="p">}</span><span class="w"> </span><span class="n">loc</span><span class="p">(</span><span class="err">#</span><span class="n">loc</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="step-5-llir-llvm-ir">Step 5: LLIR (LLVM IR)<a class="headerlink" href="#step-5-llir-llvm-ir" title="Permanent link">¶</a></h2>
<p>这一步转换是 Triton 代码能执行的关键，在这一步中，Trion JIT 编译器将 Triton 中专有的面向并行计算的抽象转换成通用的 LLVM 框架能够理解和处理的机器无关指令。</p>
<p>在这一步中，主要涉及的是：
1. 内存抽象的降级：将 TTGIR 中标记的访问模式翻译成 LLVM IR 接受的指令；为 TTGIR 中的抽象指针赋予正确的 LLVM 地址空间 ID；将 TTGIR 中索引计算的指令转换为 LLVM 中的准确计算。
2. 并行抽象的降级：将 TTGIR 中 pid 相关的抽象翻译为对特定 CUDA 寄存器的访问；降级 TTGIR 中的同步操作，翻译为 CUDA 的同步函数。
3. 控制流抽象的降级：将循环分支转化为 LLVM 基本块结构并通过 Phi 节点处理；将判断分枝转换为 Block 和 br 指令构成的 CFG
4. 类型与读写指令抽象的降级：triton 函数降级为 LLVM 指令，相关类型降级为标准类型。</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">;</span><span class="w"> </span><span class="n">ModuleID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">'</span><span class="n">LLVMDialectModule</span><span class="err">'</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">source_filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"LLVMDialectModule"</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">target</span><span class="w"> </span><span class="n">datalayout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"e-p3:32:32-p4:32:32-p5:32:32-p6:32:32-p7:32:32-i64:64-i128:128-v16:16-v32:32-n16:32:64"</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">;</span><span class="w"> </span><span class="n">Function</span><span class="w"> </span><span class="n">Attrs</span><span class="o">:</span><span class="w"> </span><span class="n">nounwind</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="n">define</span><span class="w"> </span><span class="n">ptx_kernel</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="err">@</span><span class="n">add_kernel</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">readnone</span><span class="w"> </span><span class="n">captures</span><span class="p">(</span><span class="n">none</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">readnone</span><span class="w"> </span><span class="n">captures</span><span class="p">(</span><span class="n">none</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">local_unnamed_addr</span><span class="w"> </span><span class="err">#</span><span class="mi">0</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">  </span><span class="o">%</span><span class="mi">7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="err">@</span><span class="n">llvm</span><span class="p">.</span><span class="n">nvvm</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">ptx</span><span class="p">.</span><span class="n">sreg</span><span class="p">.</span><span class="n">ctaid</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">7</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">  </span><span class="o">%</span><span class="mi">8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shl</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">8</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">  </span><span class="o">%</span><span class="mi">9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="err">@</span><span class="n">llvm</span><span class="p">.</span><span class="n">nvvm</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">ptx</span><span class="p">.</span><span class="n">sreg</span><span class="p">.</span><span class="n">tid</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">9</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="o">%</span><span class="mi">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shl</span><span class="w"> </span><span class="n">nuw</span><span class="w"> </span><span class="n">nsw</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">9</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">  </span><span class="o">%</span><span class="mi">11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">508</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">9</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">  </span><span class="o">%</span><span class="mi">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">disjoint</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">10</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">  </span><span class="o">%</span><span class="mi">13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">disjoint</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">10</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">  </span><span class="o">%</span><span class="mi">14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">icmp</span><span class="w"> </span><span class="n">slt</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">11</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">  </span><span class="o">%</span><span class="mi">15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">icmp</span><span class="w"> </span><span class="n">slt</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">11</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">  </span><span class="o">%</span><span class="mi">16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sext</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">12</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i64</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">12</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">  </span><span class="o">%</span><span class="mi">17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getelementptr</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="o">%</span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">12</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">  </span><span class="o">%</span><span class="mi">18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sext</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">13</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i64</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">12</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">  </span><span class="o">%</span><span class="mi">19</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getelementptr</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="o">%</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">12</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">  </span><span class="o">%</span><span class="mi">20</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">asm</span><span class="w"> </span><span class="n">sideeffect</span><span class="w"> </span><span class="s">"mov.u32 $0, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $1, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $2, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $3, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9@$5 ld.global.v4.b32 { $0, $1, $2, $3 }, [ $4 + 0 ];"</span><span class="p">,</span><span class="w"> </span><span class="s">"=r,=r,=r,=r,l,b"</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="o">%</span><span class="mi">14</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">  </span><span class="o">%</span><span class="mi">21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">  </span><span class="o">%</span><span class="mi">22</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">  </span><span class="o">%</span><span class="mi">23</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">  </span><span class="o">%</span><span class="mi">24</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">  </span><span class="o">%</span><span class="mi">25</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">21</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">  </span><span class="o">%</span><span class="mi">26</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">22</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">  </span><span class="o">%</span><span class="mi">27</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">23</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">  </span><span class="o">%</span><span class="mi">28</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">24</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">  </span><span class="o">%</span><span class="mi">29</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">asm</span><span class="w"> </span><span class="n">sideeffect</span><span class="w"> </span><span class="s">"mov.u32 $0, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $1, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $2, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $3, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9@$5 ld.global.v4.b32 { $0, $1, $2, $3 }, [ $4 + 0 ];"</span><span class="p">,</span><span class="w"> </span><span class="s">"=r,=r,=r,=r,l,b"</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="o">%</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">  </span><span class="o">%</span><span class="mi">30</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">29</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">  </span><span class="o">%</span><span class="mi">31</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">29</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w">  </span><span class="o">%</span><span class="mi">32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">29</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w">  </span><span class="o">%</span><span class="mi">33</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">29</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">  </span><span class="o">%</span><span class="mi">34</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">30</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a><span class="w">  </span><span class="o">%</span><span class="mi">35</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">31</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="w">  </span><span class="o">%</span><span class="mi">36</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">32</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w">  </span><span class="o">%</span><span class="mi">37</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">33</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">13</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="w">  </span><span class="o">%</span><span class="mi">38</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getelementptr</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="o">%</span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">14</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="w">  </span><span class="o">%</span><span class="mi">39</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getelementptr</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="o">%</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">14</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a><span class="w">  </span><span class="o">%</span><span class="mi">40</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">asm</span><span class="w"> </span><span class="n">sideeffect</span><span class="w"> </span><span class="s">"mov.u32 $0, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $1, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $2, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $3, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9@$5 ld.global.v4.b32 { $0, $1, $2, $3 }, [ $4 + 0 ];"</span><span class="p">,</span><span class="w"> </span><span class="s">"=r,=r,=r,=r,l,b"</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">38</span><span class="p">,</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="o">%</span><span class="mi">14</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="w">  </span><span class="o">%</span><span class="mi">41</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a><span class="w">  </span><span class="o">%</span><span class="mi">42</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a><span class="w">  </span><span class="o">%</span><span class="mi">43</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a><span class="w">  </span><span class="o">%</span><span class="mi">44</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a><span class="w">  </span><span class="o">%</span><span class="mi">45</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">41</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a><span class="w">  </span><span class="o">%</span><span class="mi">46</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">42</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a><span class="w">  </span><span class="o">%</span><span class="mi">47</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">43</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a><span class="w">  </span><span class="o">%</span><span class="mi">48</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">44</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a><span class="w">  </span><span class="o">%</span><span class="mi">49</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">asm</span><span class="w"> </span><span class="n">sideeffect</span><span class="w"> </span><span class="s">"mov.u32 $0, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $1, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $2, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9mov.u32 $3, 0x0;</span><span class="se">\0</span><span class="s">A</span><span class="se">\0</span><span class="s">9@$5 ld.global.v4.b32 { $0, $1, $2, $3 }, [ $4 + 0 ];"</span><span class="p">,</span><span class="w"> </span><span class="s">"=r,=r,=r,=r,l,b"</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">39</span><span class="p">,</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="o">%</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a><span class="w">  </span><span class="o">%</span><span class="mi">50</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a><span class="w">  </span><span class="o">%</span><span class="mi">51</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a><span class="w">  </span><span class="o">%</span><span class="mi">52</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-53"><a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a><span class="w">  </span><span class="o">%</span><span class="mi">53</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extractvalue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">%</span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-54"><a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a><span class="w">  </span><span class="o">%</span><span class="mi">54</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">50</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-55"><a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a><span class="w">  </span><span class="o">%</span><span class="mi">55</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">51</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-56"><a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a><span class="w">  </span><span class="o">%</span><span class="mi">56</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">52</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-57"><a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a><span class="w">  </span><span class="o">%</span><span class="mi">57</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">53</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">15</span>
</span><span id="__span-4-58"><a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a><span class="w">  </span><span class="o">%</span><span class="mi">58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-59"><a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a><span class="w">  </span><span class="o">%</span><span class="mi">59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">46</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-60"><a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="w">  </span><span class="o">%</span><span class="mi">60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">47</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-61"><a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a><span class="w">  </span><span class="o">%</span><span class="mi">61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">48</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-62"><a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a><span class="w">  </span><span class="o">%</span><span class="mi">62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">34</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">54</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-63"><a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a><span class="w">  </span><span class="o">%</span><span class="mi">63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">35</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">55</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-64"><a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a><span class="w">  </span><span class="o">%</span><span class="mi">64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">56</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-65"><a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a><span class="w">  </span><span class="o">%</span><span class="mi">65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fadd</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">37</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="mi">57</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">16</span>
</span><span id="__span-4-66"><a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a><span class="w">  </span><span class="o">%</span><span class="mi">66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getelementptr</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="o">%</span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">17</span>
</span><span id="__span-4-67"><a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a><span class="w">  </span><span class="o">%</span><span class="mi">67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getelementptr</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">i64</span><span class="w"> </span><span class="o">%</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">17</span>
</span><span id="__span-4-68"><a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a><span class="w">  </span><span class="o">%</span><span class="mi">68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">58</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-69"><a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a><span class="w">  </span><span class="o">%</span><span class="mi">69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">59</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-70"><a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a><span class="w">  </span><span class="o">%</span><span class="mi">70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">60</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-71"><a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a><span class="w">  </span><span class="o">%</span><span class="mi">71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">61</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-72"><a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a><span class="w">  </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="k">asm</span><span class="w"> </span><span class="n">sideeffect</span><span class="w"> </span><span class="s">"@$5 st.global.v4.b32 [ $4 + 0 ], { $0, $1, $2, $3 };"</span><span class="p">,</span><span class="w"> </span><span class="s">"r,r,r,r,l,b"</span><span class="p">(</span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">69</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">71</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">66</span><span class="p">,</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="o">%</span><span class="mi">14</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-73"><a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a><span class="w">  </span><span class="o">%</span><span class="mi">72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">62</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-74"><a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a><span class="w">  </span><span class="o">%</span><span class="mi">73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">63</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-75"><a id="__codelineno-4-75" name="__codelineno-4-75" href="#__codelineno-4-75"></a><span class="w">  </span><span class="o">%</span><span class="mi">74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">64</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-76"><a id="__codelineno-4-76" name="__codelineno-4-76" href="#__codelineno-4-76"></a><span class="w">  </span><span class="o">%</span><span class="mi">75</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitcast</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">%</span><span class="mi">65</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">i32</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-77"><a id="__codelineno-4-77" name="__codelineno-4-77" href="#__codelineno-4-77"></a><span class="w">  </span><span class="n">tail</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="k">asm</span><span class="w"> </span><span class="n">sideeffect</span><span class="w"> </span><span class="s">"@$5 st.global.v4.b32 [ $4 + 0 ], { $0, $1, $2, $3 };"</span><span class="p">,</span><span class="w"> </span><span class="s">"r,r,r,r,l,b"</span><span class="p">(</span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">72</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">73</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">74</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="o">%</span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">addrspace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="o">%</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">18</span>
</span><span id="__span-4-78"><a id="__codelineno-4-78" name="__codelineno-4-78" href="#__codelineno-4-78"></a><span class="w">  </span><span class="n">ret</span><span class="w"> </span><span class="kt">void</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">dbg</span><span class="w"> </span><span class="o">!</span><span class="mi">19</span>
</span><span id="__span-4-79"><a id="__codelineno-4-79" name="__codelineno-4-79" href="#__codelineno-4-79"></a><span class="p">}</span>
</span><span id="__span-4-80"><a id="__codelineno-4-80" name="__codelineno-4-80" href="#__codelineno-4-80"></a>
</span><span id="__span-4-81"><a id="__codelineno-4-81" name="__codelineno-4-81" href="#__codelineno-4-81"></a><span class="p">;</span><span class="w"> </span><span class="n">Function</span><span class="w"> </span><span class="n">Attrs</span><span class="o">:</span><span class="w"> </span><span class="n">mustprogress</span><span class="w"> </span><span class="n">nocallback</span><span class="w"> </span><span class="n">nofree</span><span class="w"> </span><span class="n">nosync</span><span class="w"> </span><span class="n">nounwind</span><span class="w"> </span><span class="n">speculatable</span><span class="w"> </span><span class="n">willreturn</span><span class="w"> </span><span class="n">memory</span><span class="p">(</span><span class="n">none</span><span class="p">)</span>
</span><span id="__span-4-82"><a id="__codelineno-4-82" name="__codelineno-4-82" href="#__codelineno-4-82"></a><span class="n">declare</span><span class="w"> </span><span class="n">noundef</span><span class="w"> </span><span class="n">range</span><span class="p">(</span><span class="n">i32</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2147483647</span><span class="p">)</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="err">@</span><span class="n">llvm</span><span class="p">.</span><span class="n">nvvm</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">ptx</span><span class="p">.</span><span class="n">sreg</span><span class="p">.</span><span class="n">ctaid</span><span class="p">.</span><span class="n">x</span><span class="p">()</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span>
</span><span id="__span-4-83"><a id="__codelineno-4-83" name="__codelineno-4-83" href="#__codelineno-4-83"></a>
</span><span id="__span-4-84"><a id="__codelineno-4-84" name="__codelineno-4-84" href="#__codelineno-4-84"></a><span class="p">;</span><span class="w"> </span><span class="n">Function</span><span class="w"> </span><span class="n">Attrs</span><span class="o">:</span><span class="w"> </span><span class="n">mustprogress</span><span class="w"> </span><span class="n">nocallback</span><span class="w"> </span><span class="n">nofree</span><span class="w"> </span><span class="n">nosync</span><span class="w"> </span><span class="n">nounwind</span><span class="w"> </span><span class="n">speculatable</span><span class="w"> </span><span class="n">willreturn</span><span class="w"> </span><span class="n">memory</span><span class="p">(</span><span class="n">none</span><span class="p">)</span>
</span><span id="__span-4-85"><a id="__codelineno-4-85" name="__codelineno-4-85" href="#__codelineno-4-85"></a><span class="n">declare</span><span class="w"> </span><span class="n">noundef</span><span class="w"> </span><span class="n">range</span><span class="p">(</span><span class="n">i32</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">)</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="err">@</span><span class="n">llvm</span><span class="p">.</span><span class="n">nvvm</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">ptx</span><span class="p">.</span><span class="n">sreg</span><span class="p">.</span><span class="n">tid</span><span class="p">.</span><span class="n">x</span><span class="p">()</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span>
</span><span id="__span-4-86"><a id="__codelineno-4-86" name="__codelineno-4-86" href="#__codelineno-4-86"></a>
</span><span id="__span-4-87"><a id="__codelineno-4-87" name="__codelineno-4-87" href="#__codelineno-4-87"></a><span class="n">attributes</span><span class="w"> </span><span class="err">#</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">nounwind</span><span class="w"> </span><span class="s">"nvvm.reqntid"</span><span class="o">=</span><span class="s">"128"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-4-88"><a id="__codelineno-4-88" name="__codelineno-4-88" href="#__codelineno-4-88"></a><span class="n">attributes</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mustprogress</span><span class="w"> </span><span class="n">nocallback</span><span class="w"> </span><span class="n">nofree</span><span class="w"> </span><span class="n">nosync</span><span class="w"> </span><span class="n">nounwind</span><span class="w"> </span><span class="n">speculatable</span><span class="w"> </span><span class="n">willreturn</span><span class="w"> </span><span class="n">memory</span><span class="p">(</span><span class="n">none</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-4-89"><a id="__codelineno-4-89" name="__codelineno-4-89" href="#__codelineno-4-89"></a><span class="n">attributes</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">nounwind</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-4-90"><a id="__codelineno-4-90" name="__codelineno-4-90" href="#__codelineno-4-90"></a>
</span><span id="__span-4-91"><a id="__codelineno-4-91" name="__codelineno-4-91" href="#__codelineno-4-91"></a><span class="o">!</span><span class="n">llvm</span><span class="p">.</span><span class="n">dbg</span><span class="p">.</span><span class="n">cu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="p">{</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span>
</span><span id="__span-4-92"><a id="__codelineno-4-92" name="__codelineno-4-92" href="#__codelineno-4-92"></a><span class="o">!</span><span class="n">llvm</span><span class="p">.</span><span class="n">module</span><span class="p">.</span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="p">{</span><span class="o">!</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="mi">3</span><span class="p">}</span>
</span><span id="__span-4-93"><a id="__codelineno-4-93" name="__codelineno-4-93" href="#__codelineno-4-93"></a>
</span><span id="__span-4-94"><a id="__codelineno-4-94" name="__codelineno-4-94" href="#__codelineno-4-94"></a><span class="o">!</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distinct</span><span class="w"> </span><span class="o">!</span><span class="n">DICompileUnit</span><span class="p">(</span><span class="n">language</span><span class="o">:</span><span class="w"> </span><span class="n">DW_LANG_C</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">producer</span><span class="o">:</span><span class="w"> </span><span class="s">"triton"</span><span class="p">,</span><span class="w"> </span><span class="n">isOptimized</span><span class="o">:</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">runtimeVersion</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">emissionKind</span><span class="o">:</span><span class="w"> </span><span class="n">LineTablesOnly</span><span class="p">)</span>
</span><span id="__span-4-95"><a id="__codelineno-4-95" name="__codelineno-4-95" href="#__codelineno-4-95"></a><span class="o">!</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DIFile</span><span class="p">(</span><span class="n">filename</span><span class="o">:</span><span class="w"> </span><span class="s">"triton_add.py"</span><span class="p">,</span><span class="w"> </span><span class="n">directory</span><span class="o">:</span><span class="w"> </span><span class="s">"/home/miner/code/triton"</span><span class="p">)</span>
</span><span id="__span-4-96"><a id="__codelineno-4-96" name="__codelineno-4-96" href="#__codelineno-4-96"></a><span class="o">!</span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="p">{</span><span class="n">i32</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="s">"Debug Info Version"</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span>
</span><span id="__span-4-97"><a id="__codelineno-4-97" name="__codelineno-4-97" href="#__codelineno-4-97"></a><span class="o">!</span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="p">{</span><span class="n">i32</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="s">"nvvm-reflect-ftz"</span><span class="p">,</span><span class="w"> </span><span class="n">i32</span><span class="w"> </span><span class="mi">1</span><span class="p">}</span>
</span><span id="__span-4-98"><a id="__codelineno-4-98" name="__codelineno-4-98" href="#__codelineno-4-98"></a><span class="o">!</span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distinct</span><span class="w"> </span><span class="o">!</span><span class="n">DISubprogram</span><span class="p">(</span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="s">"add_kernel"</span><span class="p">,</span><span class="w"> </span><span class="n">linkageName</span><span class="o">:</span><span class="w"> </span><span class="s">"add_kernel"</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">scopeLine</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">spFlags</span><span class="o">:</span><span class="w"> </span><span class="n">DISPFlagDefinition</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DISPFlagOptimized</span><span class="p">,</span><span class="w"> </span><span class="n">unit</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-4-99"><a id="__codelineno-4-99" name="__codelineno-4-99" href="#__codelineno-4-99"></a><span class="o">!</span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DISubroutineType</span><span class="p">(</span><span class="n">cc</span><span class="o">:</span><span class="w"> </span><span class="n">DW_CC_normal</span><span class="p">,</span><span class="w"> </span><span class="n">types</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">6</span><span class="p">)</span>
</span><span id="__span-4-100"><a id="__codelineno-4-100" name="__codelineno-4-100" href="#__codelineno-4-100"></a><span class="o">!</span><span class="mi">6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="p">{}</span>
</span><span id="__span-4-101"><a id="__codelineno-4-101" name="__codelineno-4-101" href="#__codelineno-4-101"></a><span class="o">!</span><span class="mi">7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-102"><a id="__codelineno-4-102" name="__codelineno-4-102" href="#__codelineno-4-102"></a><span class="o">!</span><span class="mi">8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-103"><a id="__codelineno-4-103" name="__codelineno-4-103" href="#__codelineno-4-103"></a><span class="o">!</span><span class="mi">9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">41</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-104"><a id="__codelineno-4-104" name="__codelineno-4-104" href="#__codelineno-4-104"></a><span class="o">!</span><span class="mi">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-105"><a id="__codelineno-4-105" name="__codelineno-4-105" href="#__codelineno-4-105"></a><span class="o">!</span><span class="mi">11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-106"><a id="__codelineno-4-106" name="__codelineno-4-106" href="#__codelineno-4-106"></a><span class="o">!</span><span class="mi">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-107"><a id="__codelineno-4-107" name="__codelineno-4-107" href="#__codelineno-4-107"></a><span class="o">!</span><span class="mi">13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-108"><a id="__codelineno-4-108" name="__codelineno-4-108" href="#__codelineno-4-108"></a><span class="o">!</span><span class="mi">14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-109"><a id="__codelineno-4-109" name="__codelineno-4-109" href="#__codelineno-4-109"></a><span class="o">!</span><span class="mi">15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-110"><a id="__codelineno-4-110" name="__codelineno-4-110" href="#__codelineno-4-110"></a><span class="o">!</span><span class="mi">16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-111"><a id="__codelineno-4-111" name="__codelineno-4-111" href="#__codelineno-4-111"></a><span class="o">!</span><span class="mi">17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-112"><a id="__codelineno-4-112" name="__codelineno-4-112" href="#__codelineno-4-112"></a><span class="o">!</span><span class="mi">18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-113"><a id="__codelineno-4-113" name="__codelineno-4-113" href="#__codelineno-4-113"></a><span class="o">!</span><span class="mi">19</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">DILocation</span><span class="p">(</span><span class="n">line</span><span class="o">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="mi">4</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="step-6-ptx-parallel-thread-execution">Step 6: PTX (Parallel Thread eXecution)<a class="headerlink" href="#step-6-ptx-parallel-thread-execution" title="Permanent link">¶</a></h2>
<p>转换到 PTX 的过程由 LLVM-NVPTX 后端和 NVVM (NVIDIA Virtual Machine) 共同完成，目的是将机器无关的 LLIR 转换为 GPU 虚拟指令集 PTX。</p>
<p>在 PTX 虚拟指令集中，使用虚拟寄存器进行编写。在实际运行前，PTX 代码会被 CUDA 转换为 SASS 代码，在这个转换过程中才会真正绑定实际的寄存器。</p>
<p>这一步的转换中，主要考虑 NVIDIA GPU 的特性来对代码进行优化，确保 LLVM IR 的转换是 GPU 友好的。具体来说，这一步所做的内容主要是：
1. 应用 GPU 特有优化
2. 翻译 LLVM IR 语句：每句 LLVM IR 会被翻译为一条或多条 PTX。
3. 生成 CUDA 运行时环境的元数据：生成 PTX 头部（PTX 版本，目标架构，指针位数）；生成函数和声明，明确 Kernel 入口点，指定代码所需的寄存器数量、共享内存大小、所需的最大线程数等。</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">//</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1">// Generated by LLVM NVPTX Back-End</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1">//</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">.</span><span class="n">version</span><span class="w"> </span><span class="mf">8.7</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="n">sm_86</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="p">.</span><span class="n">address_size</span><span class="w"> </span><span class="mi">64</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="c1">// .globl   add_kernel              // -- Begin function add_kernel</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">                                        </span><span class="c1">// @add_kernel</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="p">.</span><span class="n">visible</span><span class="w"> </span><span class="p">.</span><span class="n">entry</span><span class="w"> </span><span class="n">add_kernel</span><span class="p">(</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="p">.</span><span class="n">param</span><span class="w"> </span><span class="p">.</span><span class="n">u64</span><span class="w"> </span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="p">.</span><span class="n">global</span><span class="w"> </span><span class="p">.</span><span class="n">align</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">add_kernel_param_0</span><span class="p">,</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="p">.</span><span class="n">param</span><span class="w"> </span><span class="p">.</span><span class="n">u64</span><span class="w"> </span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="p">.</span><span class="n">global</span><span class="w"> </span><span class="p">.</span><span class="n">align</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">add_kernel_param_1</span><span class="p">,</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="p">.</span><span class="n">param</span><span class="w"> </span><span class="p">.</span><span class="n">u64</span><span class="w"> </span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="p">.</span><span class="n">global</span><span class="w"> </span><span class="p">.</span><span class="n">align</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">add_kernel_param_2</span><span class="p">,</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="p">.</span><span class="n">param</span><span class="w"> </span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="n">add_kernel_param_3</span><span class="p">,</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="p">.</span><span class="n">param</span><span class="w"> </span><span class="p">.</span><span class="n">u64</span><span class="w"> </span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="p">.</span><span class="n">global</span><span class="w"> </span><span class="p">.</span><span class="n">align</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">add_kernel_param_4</span><span class="p">,</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">    </span><span class="p">.</span><span class="n">param</span><span class="w"> </span><span class="p">.</span><span class="n">u64</span><span class="w"> </span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="p">.</span><span class="n">global</span><span class="w"> </span><span class="p">.</span><span class="n">align</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">add_kernel_param_5</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="p">)</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="p">.</span><span class="n">reqntid</span><span class="w"> </span><span class="mi">128</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="p">{</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">    </span><span class="p">.</span><span class="n">reg</span><span class="w"> </span><span class="p">.</span><span class="n">pred</span><span class="w">  </span><span class="o">%</span><span class="n">p</span><span class="o">&lt;</span><span class="mi">7</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">    </span><span class="p">.</span><span class="n">reg</span><span class="w"> </span><span class="p">.</span><span class="n">b32</span><span class="w">   </span><span class="o">%</span><span class="n">r</span><span class="o">&lt;</span><span class="mi">33</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">    </span><span class="p">.</span><span class="n">reg</span><span class="w"> </span><span class="p">.</span><span class="n">b64</span><span class="w">   </span><span class="o">%</span><span class="n">rd</span><span class="o">&lt;</span><span class="mi">11</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">0</span><span class="w">                           </span><span class="c1">// triton_add.py:6:0</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="nl">$L__func_begin0</span><span class="p">:</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">0</span><span class="w">                           </span><span class="c1">// triton_add.py:6:0</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="c1">// %bb.0:</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">    </span><span class="n">ld</span><span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">b64</span><span class="w">    </span><span class="o">%</span><span class="n">rd7</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">add_kernel_param_0</span><span class="p">];</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">    </span><span class="n">ld</span><span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">b64</span><span class="w">    </span><span class="o">%</span><span class="n">rd8</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">add_kernel_param_1</span><span class="p">];</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="nl">$L__tmp0</span><span class="p">:</span>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="mi">24</span><span class="w">                         </span><span class="c1">// triton_add.py:14:24</span>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w">     </span><span class="o">%</span><span class="n">r25</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">ctaid</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">24</span><span class="w">                         </span><span class="c1">// triton_add.py:18:24</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="w">    </span><span class="n">shl</span><span class="p">.</span><span class="n">b32</span><span class="w">     </span><span class="o">%</span><span class="n">r26</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r25</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="w">    </span><span class="n">ld</span><span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">b64</span><span class="w">    </span><span class="o">%</span><span class="n">rd9</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">add_kernel_param_2</span><span class="p">];</span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="w">    </span><span class="n">ld</span><span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">b32</span><span class="w">    </span><span class="o">%</span><span class="n">r27</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">add_kernel_param_3</span><span class="p">];</span>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="mi">41</span><span class="w">                         </span><span class="c1">// triton_add.py:19:41</span>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w">     </span><span class="o">%</span><span class="n">r28</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">tid</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="w">    </span><span class="n">shl</span><span class="p">.</span><span class="n">b32</span><span class="w">     </span><span class="o">%</span><span class="n">r29</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r28</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="w">    </span><span class="n">and</span><span class="p">.</span><span class="n">b32</span><span class="w">     </span><span class="o">%</span><span class="n">r30</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r29</span><span class="p">,</span><span class="w"> </span><span class="mi">508</span><span class="p">;</span>
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="mi">28</span><span class="w">                         </span><span class="c1">// triton_add.py:19:28</span>
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="w">    </span><span class="n">or</span><span class="p">.</span><span class="n">b32</span><span class="w">  </span><span class="o">%</span><span class="n">r31</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r30</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r26</span><span class="p">;</span>
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a><span class="w">    </span><span class="n">or</span><span class="p">.</span><span class="n">b32</span><span class="w">  </span><span class="o">%</span><span class="n">r32</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r31</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">;</span>
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">21</span><span class="w"> </span><span class="mi">21</span><span class="w">                         </span><span class="c1">// triton_add.py:21:21</span>
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a><span class="w">    </span><span class="n">setp</span><span class="p">.</span><span class="n">lt</span><span class="p">.</span><span class="n">s32</span><span class="w">     </span><span class="o">%</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r31</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r27</span><span class="p">;</span>
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a><span class="w">    </span><span class="n">setp</span><span class="p">.</span><span class="n">lt</span><span class="p">.</span><span class="n">s32</span><span class="w">     </span><span class="o">%</span><span class="n">p2</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r32</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r27</span><span class="p">;</span>
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">24</span><span class="w">                         </span><span class="c1">// triton_add.py:23:24</span>
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a><span class="w">    </span><span class="n">mul</span><span class="p">.</span><span class="n">wide</span><span class="p">.</span><span class="n">s32</span><span class="w">    </span><span class="o">%</span><span class="n">rd10</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r31</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">s64</span><span class="w">     </span><span class="o">%</span><span class="n">rd1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd10</span><span class="p">;</span>
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">s64</span><span class="w">     </span><span class="o">%</span><span class="n">rd2</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd1</span><span class="p">,</span><span class="w"> </span><span class="mi">2048</span><span class="p">;</span>
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">16</span><span class="w">                         </span><span class="c1">// triton_add.py:23:16</span>
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a><span class="w">    </span><span class="c1">// begin inline asm</span>
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r2</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-57"><a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-58"><a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a><span class="w">    </span><span class="err">@</span><span class="o">%</span><span class="n">p1</span><span class="w"> </span><span class="n">ld</span><span class="p">.</span><span class="n">global</span><span class="p">.</span><span class="n">v4</span><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">%</span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r2</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r3</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r4</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">%</span><span class="n">rd1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">];</span>
</span><span id="__span-5-59"><a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a><span class="w">    </span><span class="c1">// end inline asm</span>
</span><span id="__span-5-60"><a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a><span class="w">    </span><span class="c1">// begin inline asm</span>
</span><span id="__span-5-61"><a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r5</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-62"><a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r6</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-63"><a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r7</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-64"><a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-65"><a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a><span class="w">    </span><span class="err">@</span><span class="o">%</span><span class="n">p2</span><span class="w"> </span><span class="n">ld</span><span class="p">.</span><span class="n">global</span><span class="p">.</span><span class="n">v4</span><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">%</span><span class="n">r5</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r6</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r8</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">%</span><span class="n">rd2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">];</span>
</span><span id="__span-5-66"><a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a><span class="w">    </span><span class="c1">// end inline asm</span>
</span><span id="__span-5-67"><a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">24</span><span class="w">                         </span><span class="c1">// triton_add.py:24:24</span>
</span><span id="__span-5-68"><a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">s64</span><span class="w">     </span><span class="o">%</span><span class="n">rd3</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd8</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd10</span><span class="p">;</span>
</span><span id="__span-5-69"><a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">s64</span><span class="w">     </span><span class="o">%</span><span class="n">rd4</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd3</span><span class="p">,</span><span class="w"> </span><span class="mi">2048</span><span class="p">;</span>
</span><span id="__span-5-70"><a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">16</span><span class="w">                         </span><span class="c1">// triton_add.py:24:16</span>
</span><span id="__span-5-71"><a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a><span class="w">    </span><span class="c1">// begin inline asm</span>
</span><span id="__span-5-72"><a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-73"><a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r10</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-74"><a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r11</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-75"><a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r12</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-76"><a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a><span class="w">    </span><span class="err">@</span><span class="o">%</span><span class="n">p1</span><span class="w"> </span><span class="n">ld</span><span class="p">.</span><span class="n">global</span><span class="p">.</span><span class="n">v4</span><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">%</span><span class="n">r9</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r10</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r11</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r12</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">%</span><span class="n">rd3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">];</span>
</span><span id="__span-5-77"><a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a><span class="w">    </span><span class="c1">// end inline asm</span>
</span><span id="__span-5-78"><a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a><span class="w">    </span><span class="c1">// begin inline asm</span>
</span><span id="__span-5-79"><a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r13</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-80"><a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r14</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-81"><a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r15</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-82"><a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a><span class="w">    </span><span class="n">mov</span><span class="p">.</span><span class="n">u32</span><span class="w"> </span><span class="o">%</span><span class="n">r16</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span>
</span><span id="__span-5-83"><a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a><span class="w">    </span><span class="err">@</span><span class="o">%</span><span class="n">p2</span><span class="w"> </span><span class="n">ld</span><span class="p">.</span><span class="n">global</span><span class="p">.</span><span class="n">v4</span><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">%</span><span class="n">r13</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r14</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r15</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">%</span><span class="n">rd4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">];</span>
</span><span id="__span-5-84"><a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a><span class="w">    </span><span class="c1">// end inline asm</span>
</span><span id="__span-5-85"><a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class="mi">17</span><span class="w">                         </span><span class="c1">// triton_add.py:25:17</span>
</span><span id="__span-5-86"><a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r17</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r9</span><span class="p">;</span>
</span><span id="__span-5-87"><a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r18</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r2</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r10</span><span class="p">;</span>
</span><span id="__span-5-88"><a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r19</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r3</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r11</span><span class="p">;</span>
</span><span id="__span-5-89"><a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r20</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r4</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r12</span><span class="p">;</span>
</span><span id="__span-5-90"><a id="__codelineno-5-90" name="__codelineno-5-90" href="#__codelineno-5-90"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r21</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r5</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r13</span><span class="p">;</span>
</span><span id="__span-5-91"><a id="__codelineno-5-91" name="__codelineno-5-91" href="#__codelineno-5-91"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r22</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r6</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r14</span><span class="p">;</span>
</span><span id="__span-5-92"><a id="__codelineno-5-92" name="__codelineno-5-92" href="#__codelineno-5-92"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r23</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r15</span><span class="p">;</span>
</span><span id="__span-5-93"><a id="__codelineno-5-93" name="__codelineno-5-93" href="#__codelineno-5-93"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">f32</span><span class="w">     </span><span class="o">%</span><span class="n">r24</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r8</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r16</span><span class="p">;</span>
</span><span id="__span-5-94"><a id="__codelineno-5-94" name="__codelineno-5-94" href="#__codelineno-5-94"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="mi">26</span><span class="w">                         </span><span class="c1">// triton_add.py:27:26</span>
</span><span id="__span-5-95"><a id="__codelineno-5-95" name="__codelineno-5-95" href="#__codelineno-5-95"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">s64</span><span class="w">     </span><span class="o">%</span><span class="n">rd5</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd9</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd10</span><span class="p">;</span>
</span><span id="__span-5-96"><a id="__codelineno-5-96" name="__codelineno-5-96" href="#__codelineno-5-96"></a><span class="w">    </span><span class="n">add</span><span class="p">.</span><span class="n">s64</span><span class="w">     </span><span class="o">%</span><span class="n">rd6</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">rd5</span><span class="p">,</span><span class="w"> </span><span class="mi">2048</span><span class="p">;</span>
</span><span id="__span-5-97"><a id="__codelineno-5-97" name="__codelineno-5-97" href="#__codelineno-5-97"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="mi">35</span><span class="w">                         </span><span class="c1">// triton_add.py:27:35</span>
</span><span id="__span-5-98"><a id="__codelineno-5-98" name="__codelineno-5-98" href="#__codelineno-5-98"></a><span class="w">    </span><span class="c1">// begin inline asm</span>
</span><span id="__span-5-99"><a id="__codelineno-5-99" name="__codelineno-5-99" href="#__codelineno-5-99"></a><span class="w">    </span><span class="err">@</span><span class="o">%</span><span class="n">p1</span><span class="w"> </span><span class="n">st</span><span class="p">.</span><span class="n">global</span><span class="p">.</span><span class="n">v4</span><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">%</span><span class="n">rd5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">%</span><span class="n">r17</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r18</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r19</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r20</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-5-100"><a id="__codelineno-5-100" name="__codelineno-5-100" href="#__codelineno-5-100"></a><span class="w">    </span><span class="c1">// end inline asm</span>
</span><span id="__span-5-101"><a id="__codelineno-5-101" name="__codelineno-5-101" href="#__codelineno-5-101"></a><span class="w">    </span><span class="c1">// begin inline asm</span>
</span><span id="__span-5-102"><a id="__codelineno-5-102" name="__codelineno-5-102" href="#__codelineno-5-102"></a><span class="w">    </span><span class="err">@</span><span class="o">%</span><span class="n">p2</span><span class="w"> </span><span class="n">st</span><span class="p">.</span><span class="n">global</span><span class="p">.</span><span class="n">v4</span><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">%</span><span class="n">rd6</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">%</span><span class="n">r21</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r22</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r23</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">r24</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-5-103"><a id="__codelineno-5-103" name="__codelineno-5-103" href="#__codelineno-5-103"></a><span class="w">    </span><span class="c1">// end inline asm</span>
</span><span id="__span-5-104"><a id="__codelineno-5-104" name="__codelineno-5-104" href="#__codelineno-5-104"></a><span class="w">    </span><span class="p">.</span><span class="n">loc</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="mi">4</span><span class="w">                          </span><span class="c1">// triton_add.py:27:4</span>
</span><span id="__span-5-105"><a id="__codelineno-5-105" name="__codelineno-5-105" href="#__codelineno-5-105"></a><span class="w">    </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-5-106"><a id="__codelineno-5-106" name="__codelineno-5-106" href="#__codelineno-5-106"></a><span class="nl">$L__tmp1</span><span class="p">:</span>
</span><span id="__span-5-107"><a id="__codelineno-5-107" name="__codelineno-5-107" href="#__codelineno-5-107"></a><span class="nl">$L__func_end0</span><span class="p">:</span>
</span><span id="__span-5-108"><a id="__codelineno-5-108" name="__codelineno-5-108" href="#__codelineno-5-108"></a><span class="w">                                        </span><span class="c1">// -- End function</span>
</span><span id="__span-5-109"><a id="__codelineno-5-109" name="__codelineno-5-109" href="#__codelineno-5-109"></a><span class="p">}</span>
</span><span id="__span-5-110"><a id="__codelineno-5-110" name="__codelineno-5-110" href="#__codelineno-5-110"></a><span class="w">    </span><span class="p">.</span><span class="n">file</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="s">"/home/miner/code/triton/triton_add.py"</span>
</span><span id="__span-5-111"><a id="__codelineno-5-111" name="__codelineno-5-111" href="#__codelineno-5-111"></a><span class="w">    </span><span class="p">.</span><span class="n">section</span><span class="w">    </span><span class="p">.</span><span class="n">debug_abbrev</span>
</span><span id="__span-5-112"><a id="__codelineno-5-112" name="__codelineno-5-112" href="#__codelineno-5-112"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-113"><a id="__codelineno-5-113" name="__codelineno-5-113" href="#__codelineno-5-113"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">1</span><span class="w">                                   </span><span class="c1">// Abbreviation Code</span>
</span><span id="__span-5-114"><a id="__codelineno-5-114" name="__codelineno-5-114" href="#__codelineno-5-114"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">17</span><span class="w">                                  </span><span class="c1">// DW_TAG_compile_unit</span>
</span><span id="__span-5-115"><a id="__codelineno-5-115" name="__codelineno-5-115" href="#__codelineno-5-115"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span><span class="w">                                   </span><span class="c1">// DW_CHILDREN_no</span>
</span><span id="__span-5-116"><a id="__codelineno-5-116" name="__codelineno-5-116" href="#__codelineno-5-116"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">37</span><span class="w">                                  </span><span class="c1">// DW_AT_producer</span>
</span><span id="__span-5-117"><a id="__codelineno-5-117" name="__codelineno-5-117" href="#__codelineno-5-117"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">8</span><span class="w">                                   </span><span class="c1">// DW_FORM_string</span>
</span><span id="__span-5-118"><a id="__codelineno-5-118" name="__codelineno-5-118" href="#__codelineno-5-118"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">19</span><span class="w">                                  </span><span class="c1">// DW_AT_language</span>
</span><span id="__span-5-119"><a id="__codelineno-5-119" name="__codelineno-5-119" href="#__codelineno-5-119"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">5</span><span class="w">                                   </span><span class="c1">// DW_FORM_data2</span>
</span><span id="__span-5-120"><a id="__codelineno-5-120" name="__codelineno-5-120" href="#__codelineno-5-120"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">3</span><span class="w">                                   </span><span class="c1">// DW_AT_name</span>
</span><span id="__span-5-121"><a id="__codelineno-5-121" name="__codelineno-5-121" href="#__codelineno-5-121"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">8</span><span class="w">                                   </span><span class="c1">// DW_FORM_string</span>
</span><span id="__span-5-122"><a id="__codelineno-5-122" name="__codelineno-5-122" href="#__codelineno-5-122"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">16</span><span class="w">                                  </span><span class="c1">// DW_AT_stmt_list</span>
</span><span id="__span-5-123"><a id="__codelineno-5-123" name="__codelineno-5-123" href="#__codelineno-5-123"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">6</span><span class="w">                                   </span><span class="c1">// DW_FORM_data4</span>
</span><span id="__span-5-124"><a id="__codelineno-5-124" name="__codelineno-5-124" href="#__codelineno-5-124"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">27</span><span class="w">                                  </span><span class="c1">// DW_AT_comp_dir</span>
</span><span id="__span-5-125"><a id="__codelineno-5-125" name="__codelineno-5-125" href="#__codelineno-5-125"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">8</span><span class="w">                                   </span><span class="c1">// DW_FORM_string</span>
</span><span id="__span-5-126"><a id="__codelineno-5-126" name="__codelineno-5-126" href="#__codelineno-5-126"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span><span class="w">                                   </span><span class="c1">// EOM(1)</span>
</span><span id="__span-5-127"><a id="__codelineno-5-127" name="__codelineno-5-127" href="#__codelineno-5-127"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span><span class="w">                                   </span><span class="c1">// EOM(2)</span>
</span><span id="__span-5-128"><a id="__codelineno-5-128" name="__codelineno-5-128" href="#__codelineno-5-128"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span><span class="w">                                   </span><span class="c1">// EOM(3)</span>
</span><span id="__span-5-129"><a id="__codelineno-5-129" name="__codelineno-5-129" href="#__codelineno-5-129"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-130"><a id="__codelineno-5-130" name="__codelineno-5-130" href="#__codelineno-5-130"></a><span class="w">    </span><span class="p">.</span><span class="n">section</span><span class="w">    </span><span class="p">.</span><span class="n">debug_info</span>
</span><span id="__span-5-131"><a id="__codelineno-5-131" name="__codelineno-5-131" href="#__codelineno-5-131"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-132"><a id="__codelineno-5-132" name="__codelineno-5-132" href="#__codelineno-5-132"></a><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="mi">59</span><span class="w">                                 </span><span class="c1">// Length of Unit</span>
</span><span id="__span-5-133"><a id="__codelineno-5-133" name="__codelineno-5-133" href="#__codelineno-5-133"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">2</span><span class="w">                                   </span><span class="c1">// DWARF version number</span>
</span><span id="__span-5-134"><a id="__codelineno-5-134" name="__codelineno-5-134" href="#__codelineno-5-134"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-5-135"><a id="__codelineno-5-135" name="__codelineno-5-135" href="#__codelineno-5-135"></a><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">.</span><span class="n">debug_abbrev</span><span class="w">                      </span><span class="c1">// Offset Into Abbrev. Section</span>
</span><span id="__span-5-136"><a id="__codelineno-5-136" name="__codelineno-5-136" href="#__codelineno-5-136"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">8</span><span class="w">                                   </span><span class="c1">// Address Size (in bytes)</span>
</span><span id="__span-5-137"><a id="__codelineno-5-137" name="__codelineno-5-137" href="#__codelineno-5-137"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">1</span><span class="w">                                   </span><span class="c1">// Abbrev [1] 0xb:0x34 DW_TAG_compile_unit</span>
</span><span id="__span-5-138"><a id="__codelineno-5-138" name="__codelineno-5-138" href="#__codelineno-5-138"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">116</span><span class="w">                                 </span><span class="c1">// DW_AT_producer</span>
</span><span id="__span-5-139"><a id="__codelineno-5-139" name="__codelineno-5-139" href="#__codelineno-5-139"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">114</span>
</span><span id="__span-5-140"><a id="__codelineno-5-140" name="__codelineno-5-140" href="#__codelineno-5-140"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">105</span>
</span><span id="__span-5-141"><a id="__codelineno-5-141" name="__codelineno-5-141" href="#__codelineno-5-141"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">116</span>
</span><span id="__span-5-142"><a id="__codelineno-5-142" name="__codelineno-5-142" href="#__codelineno-5-142"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">111</span>
</span><span id="__span-5-143"><a id="__codelineno-5-143" name="__codelineno-5-143" href="#__codelineno-5-143"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">110</span>
</span><span id="__span-5-144"><a id="__codelineno-5-144" name="__codelineno-5-144" href="#__codelineno-5-144"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-5-145"><a id="__codelineno-5-145" name="__codelineno-5-145" href="#__codelineno-5-145"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">2</span><span class="w">                                   </span><span class="c1">// DW_AT_language</span>
</span><span id="__span-5-146"><a id="__codelineno-5-146" name="__codelineno-5-146" href="#__codelineno-5-146"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-5-147"><a id="__codelineno-5-147" name="__codelineno-5-147" href="#__codelineno-5-147"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">116</span><span class="w">                                 </span><span class="c1">// DW_AT_name</span>
</span><span id="__span-5-148"><a id="__codelineno-5-148" name="__codelineno-5-148" href="#__codelineno-5-148"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">114</span>
</span><span id="__span-5-149"><a id="__codelineno-5-149" name="__codelineno-5-149" href="#__codelineno-5-149"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">105</span>
</span><span id="__span-5-150"><a id="__codelineno-5-150" name="__codelineno-5-150" href="#__codelineno-5-150"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">116</span>
</span><span id="__span-5-151"><a id="__codelineno-5-151" name="__codelineno-5-151" href="#__codelineno-5-151"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">111</span>
</span><span id="__span-5-152"><a id="__codelineno-5-152" name="__codelineno-5-152" href="#__codelineno-5-152"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">110</span>
</span><span id="__span-5-153"><a id="__codelineno-5-153" name="__codelineno-5-153" href="#__codelineno-5-153"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">95</span>
</span><span id="__span-5-154"><a id="__codelineno-5-154" name="__codelineno-5-154" href="#__codelineno-5-154"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">97</span>
</span><span id="__span-5-155"><a id="__codelineno-5-155" name="__codelineno-5-155" href="#__codelineno-5-155"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">100</span>
</span><span id="__span-5-156"><a id="__codelineno-5-156" name="__codelineno-5-156" href="#__codelineno-5-156"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">100</span>
</span><span id="__span-5-157"><a id="__codelineno-5-157" name="__codelineno-5-157" href="#__codelineno-5-157"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">46</span>
</span><span id="__span-5-158"><a id="__codelineno-5-158" name="__codelineno-5-158" href="#__codelineno-5-158"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">112</span>
</span><span id="__span-5-159"><a id="__codelineno-5-159" name="__codelineno-5-159" href="#__codelineno-5-159"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">121</span>
</span><span id="__span-5-160"><a id="__codelineno-5-160" name="__codelineno-5-160" href="#__codelineno-5-160"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-5-161"><a id="__codelineno-5-161" name="__codelineno-5-161" href="#__codelineno-5-161"></a><span class="p">.</span><span class="n">b32</span><span class="w"> </span><span class="p">.</span><span class="n">debug_line</span><span class="w">                        </span><span class="c1">// DW_AT_stmt_list</span>
</span><span id="__span-5-162"><a id="__codelineno-5-162" name="__codelineno-5-162" href="#__codelineno-5-162"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">47</span><span class="w">                                  </span><span class="c1">// DW_AT_comp_dir</span>
</span><span id="__span-5-163"><a id="__codelineno-5-163" name="__codelineno-5-163" href="#__codelineno-5-163"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">104</span>
</span><span id="__span-5-164"><a id="__codelineno-5-164" name="__codelineno-5-164" href="#__codelineno-5-164"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">111</span>
</span><span id="__span-5-165"><a id="__codelineno-5-165" name="__codelineno-5-165" href="#__codelineno-5-165"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">109</span>
</span><span id="__span-5-166"><a id="__codelineno-5-166" name="__codelineno-5-166" href="#__codelineno-5-166"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">101</span>
</span><span id="__span-5-167"><a id="__codelineno-5-167" name="__codelineno-5-167" href="#__codelineno-5-167"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">47</span>
</span><span id="__span-5-168"><a id="__codelineno-5-168" name="__codelineno-5-168" href="#__codelineno-5-168"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">109</span>
</span><span id="__span-5-169"><a id="__codelineno-5-169" name="__codelineno-5-169" href="#__codelineno-5-169"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">105</span>
</span><span id="__span-5-170"><a id="__codelineno-5-170" name="__codelineno-5-170" href="#__codelineno-5-170"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">110</span>
</span><span id="__span-5-171"><a id="__codelineno-5-171" name="__codelineno-5-171" href="#__codelineno-5-171"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">101</span>
</span><span id="__span-5-172"><a id="__codelineno-5-172" name="__codelineno-5-172" href="#__codelineno-5-172"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">114</span>
</span><span id="__span-5-173"><a id="__codelineno-5-173" name="__codelineno-5-173" href="#__codelineno-5-173"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">47</span>
</span><span id="__span-5-174"><a id="__codelineno-5-174" name="__codelineno-5-174" href="#__codelineno-5-174"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">99</span>
</span><span id="__span-5-175"><a id="__codelineno-5-175" name="__codelineno-5-175" href="#__codelineno-5-175"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">111</span>
</span><span id="__span-5-176"><a id="__codelineno-5-176" name="__codelineno-5-176" href="#__codelineno-5-176"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">100</span>
</span><span id="__span-5-177"><a id="__codelineno-5-177" name="__codelineno-5-177" href="#__codelineno-5-177"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">101</span>
</span><span id="__span-5-178"><a id="__codelineno-5-178" name="__codelineno-5-178" href="#__codelineno-5-178"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">47</span>
</span><span id="__span-5-179"><a id="__codelineno-5-179" name="__codelineno-5-179" href="#__codelineno-5-179"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">116</span>
</span><span id="__span-5-180"><a id="__codelineno-5-180" name="__codelineno-5-180" href="#__codelineno-5-180"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">114</span>
</span><span id="__span-5-181"><a id="__codelineno-5-181" name="__codelineno-5-181" href="#__codelineno-5-181"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">105</span>
</span><span id="__span-5-182"><a id="__codelineno-5-182" name="__codelineno-5-182" href="#__codelineno-5-182"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">116</span>
</span><span id="__span-5-183"><a id="__codelineno-5-183" name="__codelineno-5-183" href="#__codelineno-5-183"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">111</span>
</span><span id="__span-5-184"><a id="__codelineno-5-184" name="__codelineno-5-184" href="#__codelineno-5-184"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">110</span>
</span><span id="__span-5-185"><a id="__codelineno-5-185" name="__codelineno-5-185" href="#__codelineno-5-185"></a><span class="p">.</span><span class="n">b8</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-5-186"><a id="__codelineno-5-186" name="__codelineno-5-186" href="#__codelineno-5-186"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-187"><a id="__codelineno-5-187" name="__codelineno-5-187" href="#__codelineno-5-187"></a><span class="w">    </span><span class="p">.</span><span class="n">section</span><span class="w">    </span><span class="p">.</span><span class="n">debug_macinfo</span><span class="w">  </span><span class="p">{</span><span class="w">   </span><span class="p">}</span>
</span></code></pre></div>
<h2 id="step-7-cubin-cuda-binary">Step 7: CUBIN (Cuda Binary)<a class="headerlink" href="#step-7-cubin-cuda-binary" title="Permanent link">¶</a></h2>
<p>CUBIN，即 SASS(Streaming Array Specific Shader) GPU 原生指令集代码</p>
<p>这是最终转换，将虚拟汇编代码转换为可以直接在 GPU 上运行的 CUBIN。</p>
<p>主要操作为：
1. 将 PTX 指令集汇编为特定 GPU 架构的机器吗
2. 指令优化与调度：根据硬件信息进行特定优化，如指令集并行、线程束调度、延迟隐藏等。
3. 寄存器分配与溢出处理：虚拟寄存器映射到物理寄存器，物理寄存器不足时映射局部内存。
4. 生成 CUBIN 元信息：划分不同段，分为 SASS, 常量内存数据，kernel 元数据等。</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">[</span><span class="n">二进制数据</span><span class="p">]</span>
</span></code></pre></div>
<h2 id="_1">参考链接<a class="headerlink" href="#_1" title="Permanent link">¶</a></h2>
<ul>
<li><a href="https://triton.hyper.ai/docs/getting-started/tutorials/vector-addition">Triton 中文站</a></li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="December 14, 2025 18:00:07 CET"><span class="timeago" datetime="2025-12-14T18:00:07+01:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="December 14, 2025 18:00:07 CET">2025-12-14</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="December 14, 2025 18:00:07 CET"><span class="timeago" datetime="2025-12-14T18:00:07+01:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="December 14, 2025 18:00:07 CET">2025-12-14</span>
  </span>

    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        这篇文章有帮助吗？
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="有帮助" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"></path></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="无帮助" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"></path></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              谢谢！大家的认可是我前进的动力！
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              感谢反馈，如有疑问或建议可以联系我<a href="mailto:sky_miner@qq.com">sky_miner@qq.com</a>
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚">
        
          
          <a href="../decision_tree/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 实现决策树">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                实现决策树
              </div>
            </div>
          </a>
        
        
          
          <a href="../../methods/" class="md-footer__link md-footer__link--next" aria-label="下一页: 方法记录">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                方法记录
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2025 Sky_miner
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.gg/uBA2PGrh7E" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.317 4.37a19.8 19.8 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.3 18.3 0 0 0-5.487 0 13 13 0 0 0-.617-1.25.08.08 0 0 0-.079-.037A19.7 19.7 0 0 0 3.677 4.37a.1.1 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.08.08 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.08.08 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13 13 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10 10 0 0 0 .372-.292.07.07 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.07.07 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.3 12.3 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.08.08 0 0 0 .084.028 19.8 19.8 0 0 0 6.002-3.03.08.08 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.06.06 0 0 0-.031-.03M8.02 15.33c-1.182 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418m7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Skyminers" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "content.action.edit", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.top", "navigation.tabs", "search.suggest", "search.highlight", "search.share", "toc.follow"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": false, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "none"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>